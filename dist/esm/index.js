var A=typeof global!="undefined"&&{}.toString.call(global)==="[object global]";A||(window.process={env:{TEST:!1}});var u=process.env.TEST?!1:A;var m={};function N(a,...o){let c="",l=0,b=o.length;for(;l<b;){let e=a[l],t=o[l];if(u)c+=e+(Array.isArray(t)?t.join(""):t);else{let n=/on\w+="$/.test(e),r=typeof t=="function",h=n?e.replace(/on(\w+)="$/,`data-_on_="" data-_fn_${l}='${t}' data-_ev_${l}="$1" data-_arg_${l}="`):e,k=r?n?`${l}`:t():t instanceof Node||Array.isArray(t)?`<script data-_replace_='${l}'><\/script>`:t;c+=h+k}l++}if(c+=a[a.length-1],u)return c.replace(/\son\w+=".*?"/g,"").replace(/\skey=".*?"/g,"").replace(/>[\r\n ]+</g,"><").replace(/(<.*?>)|\s+/g,(e,t)=>t||" ").trim();let y=document.createElement("template");y.innerHTML=c;let s=y.content,i=0,g=[...s.querySelectorAll("[data-_replace_]")],v=g.length;for(;i<v;){let e=g[i],t=o[e.getAttribute("data-_replace_")];if(Array.isArray(t)){let n=0,r=t.length;for(;n<r;){let h=t[n]instanceof Node?t[n]:document.createTextNode(t[n]);e.parentNode.insertBefore(h,e),n++}e.parentNode.removeChild(e)}else e.parentNode.replaceChild(t,e);i++}let _=0,d=[...s.querySelectorAll("[data-_on_]")],$=d.length;for(;_<$;){let e=d[_];Object.keys(d[_].dataset).forEach(t=>{if(/^_ev_/.test(t)){let n=t.replace("_ev_",""),r=e.getAttribute(`data-_ev_${n}`);e.__key__=e.getAttribute("key"),e.__handler__=e.__handler__||{},e.__handler__[r]=o[e.getAttribute(`data-_arg_${n}`)],!m[r]&&document.addEventListener(r,T),m[r]=1,e.removeAttribute("data-_on_"),e.removeAttribute(`data-_fn_${n}`),e.removeAttribute(`data-_arg_${n}`),e.removeAttribute(`data-_ev_${n}`)}}),e.removeAttribute("key"),_++}let p=0,f=[...s.querySelectorAll("[key]")],w=f.length;for(;p<w;){let e=f[p];e.__key__=e.getAttribute("key"),e.removeAttribute("key"),p++}return s.children[0]}var T=a=>{let o=a.target,c=a.type;for(;o!==null;){let l=o.__handler__&&o.__handler__[c];if(l){l(a);return}o=o.parentNode}},E=N;export{E as default};
