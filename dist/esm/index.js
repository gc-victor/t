var A=typeof global!="undefined"&&{}.toString.call(global)==="[object global]";function k(i,...c){let a="",l=0,b=c.length;for(;l<b;){let e=i[l],t=c[l];if(A)a+=e+(Array.isArray(t)?t.join(""):t);else{let n=/on\w+="$/.test(e),r=typeof t=="function",o=n?e.replace(/on(\w+)="$/,`data-_on_="" data-_fn_${l}='${t}' data-_ev_${l}="$1" data-_arg_${l}="`):e,$=r?n?`${l}`:t():t instanceof Element||Array.isArray(t)?`<script data-_replace_='${l}'><\/script>`:t;a+=o+$}l++}if(a+=i[i.length-1],A)return a.replace(/\son\w+=".*?"/g,"").replace(/\skey=".*?"/g,"").replace(/>[\r\n ]+</g,"><").replace(/(<.*?>)|\s+/g,(e,t)=>t||" ").trim();let u=document.createElement("template");u.innerHTML=a;let _=u.content,d=0,g=[..._.querySelectorAll("[data-_replace_]")],f=g.length;for(;d<f;){let e=g[d],t=c[e.getAttribute("data-_replace_")];if(Array.isArray(t)){let n=0,r=t.length;for(;n<r;){let o=t[n]instanceof HTMLElement?t[n]:document.createTextNode(t[n]);e.parentNode.insertBefore(o,e),n++}e.parentNode.removeChild(e)}else e.parentNode.replaceChild(t,e);d++}let s=0,h=[..._.querySelectorAll("[data-_on_]")],m=h.length;for(;s<m;){let e=h[s];Object.keys(h[s].dataset).forEach(t=>{if(/^_ev_/.test(t)){let n=t.replace("_ev_",""),r=e.getAttribute(`data-_ev_${n}`),o=c[e.getAttribute(`data-_arg_${n}`)];e.__key__=e.getAttribute("key"),e.__handler__=e.__handler__||{},e.__handler__[r]=o,e.addEventListener(r,o),e.removeAttribute("data-_on_"),e.removeAttribute(`data-_fn_${n}`),e.removeAttribute(`data-_arg_${n}`),e.removeAttribute(`data-_ev_${n}`)}}),e.removeAttribute("key"),s++}let p=0,y=[..._.querySelectorAll("[key]")],v=y.length;for(;p<v;){let e=y[p];e.__key__=e.getAttribute("key"),e.removeAttribute("key"),p++}return _.children[0]}var w=k;export{w as default};
