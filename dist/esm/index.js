var A=typeof global!="undefined"&&{}.toString.call(global)==="[object global]",f={};function w(o,...r){let c="",l=0,m=r.length;for(;l<m;){let e=o[l],t=r[l];if(A)c+=e+(Array.isArray(t)?t.join(""):t);else{let n=/on\w+="$/.test(e),a=typeof t=="function",p=n?e.replace(/on(\w+)="$/,`data-_on_="" data-_fn_${l}='${t}' data-_ev_${l}="$1" data-_arg_${l}="`):e,k=a?n?`${l}`:t():t instanceof Element||Array.isArray(t)?`<script data-_replace_='${l}'><\/script>`:t;c+=p+k}l++}if(c+=o[o.length-1],A)return c.replace(/\son\w+=".*?"/g,"").replace(/\skey=".*?"/g,"").replace(/>[\r\n ]+</g,"><").replace(/(<.*?>)|\s+/g,(e,t)=>t||" ").trim();let u=document.createElement("template");u.innerHTML=c;let _=u.content,i=0,y=[..._.querySelectorAll("[data-_replace_]")],b=y.length;for(;i<b;){let e=y[i],t=r[e.getAttribute("data-_replace_")];if(Array.isArray(t)){let n=0,a=t.length;for(;n<a;){let p=t[n]instanceof HTMLElement?t[n]:document.createTextNode(t[n]);e.parentNode.insertBefore(p,e),n++}e.parentNode.removeChild(e)}else e.parentNode.replaceChild(t,e);i++}let s=0,d=[..._.querySelectorAll("[data-_on_]")],v=d.length;for(;s<v;){let e=d[s];Object.keys(d[s].dataset).forEach(t=>{if(/^_ev_/.test(t)){let n=t.replace("_ev_",""),a=e.getAttribute(`data-_ev_${n}`);e.__key__=e.getAttribute("key"),e.__handler__=e.__handler__||{},e.__handler__[a]=r[e.getAttribute(`data-_arg_${n}`)],!f[a]&&document.addEventListener(a,L),f[a]=1,e.removeAttribute("data-_on_"),e.removeAttribute(`data-_fn_${n}`),e.removeAttribute(`data-_arg_${n}`),e.removeAttribute(`data-_ev_${n}`)}}),e.removeAttribute("key"),s++}let h=0,g=[..._.querySelectorAll("[key]")],$=g.length;for(;h<$;){let e=g[h];e.__key__=e.getAttribute("key"),e.removeAttribute("key"),h++}return _.children[0]}var L=o=>{let r=o.target,c=o.type;for(;r!==null;){let l=r.__handler__&&r.__handler__[c];if(l){l(o);return}r=r.parentNode}},E=w;export{E as default};
